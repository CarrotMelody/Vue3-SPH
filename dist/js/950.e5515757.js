"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[950],{7950:function(l,s,a){a.r(s),a.d(s,{default:function(){return V}});var e=a(3396),d=a(7139),n=a(9242);const r=l=>((0,e.dD)("data-v-38141782"),l=l(),(0,e.Cn)(),l),t={class:"trade-container"},i=r((()=>(0,e._)("h3",{class:"title"},"填写并核对订单信息",-1))),u={class:"content"},c=r((()=>(0,e._)("h5",{class:"receive"},"收件人信息",-1))),o=["onClick"],v={class:"s1"},_={class:"s2"},p={class:"s3"},f=(0,e.uE)('<div class="line" data-v-38141782></div><h5 class="pay" data-v-38141782>支付方式</h5><div class="address clearFix" data-v-38141782><span class="username selected" data-v-38141782>在线支付</span><span class="username" style="margin-left:5px;" data-v-38141782>货到付款</span></div><div class="line" data-v-38141782></div><h5 class="pay" data-v-38141782>送货清单</h5><div class="way" data-v-38141782><h5 data-v-38141782>配送方式</h5><div class="info clearFix" data-v-38141782><span class="s1" data-v-38141782>天天快递</span><p data-v-38141782>配送时间：预计8月10日（周三）09:00-15:00送达</p></div></div>',6),h={class:"detail"},m=r((()=>(0,e._)("h5",null,"商品清单",-1))),w=["src"],g=r((()=>(0,e._)("h4",null,"7天无理由退货",-1))),D=r((()=>(0,e._)("li",null,"有货",-1))),I={class:"bbs"},k=r((()=>(0,e._)("h5",null,"买家留言：",-1))),y=r((()=>(0,e._)("div",{class:"line"},null,-1))),b=r((()=>(0,e._)("div",{class:"bill"},[(0,e._)("h5",null,"发票信息："),(0,e._)("div",null,"普通发票（电子） 个人 明细"),(0,e._)("h5",null,"使用优惠/抵用")],-1))),A={class:"money clearFix"},F=(0,e.Uk)("件商品，总商品金额"),z=r((()=>(0,e._)("li",null,[(0,e._)("b",null,"返现："),(0,e._)("span",null,"0.00")],-1))),x=r((()=>(0,e._)("li",null,[(0,e._)("b",null,"运费："),(0,e._)("span",null,"0.00")],-1))),N={class:"trade"},C={class:"price"},U=(0,e.Uk)("应付金额:　"),O={class:"receiveInfo"},E=(0,e.Uk)(" 寄送至: "),L=(0,e.Uk)(" 收货人："),T={class:"sub clearFix"};function H(l,s,a,r,H,K){return(0,e.wg)(),(0,e.iD)("div",t,[i,(0,e._)("div",u,[c,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(r.addressInfo,(l=>((0,e.wg)(),(0,e.iD)("div",{class:"address clearFix",key:l.id},[(0,e._)("span",{class:(0,d.C_)(["username",{selected:"1"===l.isDefault}])},(0,d.zw)(l.consignee),3),(0,e._)("p",{onClick:s=>r.changeDefault(l,r.addressInfo)},[(0,e._)("span",v,(0,d.zw)(l.fullAddress),1),(0,e._)("span",_,(0,d.zw)(l.phoneNum),1),(0,e.wy)((0,e._)("span",p,"默认地址",512),[[n.F8,"1"===l.isDefault]])],8,o)])))),128)),f,(0,e._)("div",h,[m,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(r.orderInfo.detailArrayList,(l=>((0,e.wg)(),(0,e.iD)("ul",{class:"list clearFix",key:l.skuId},[(0,e._)("li",null,[(0,e._)("img",{src:l.imgUrl,alt:"",style:{width:"100px",height:"100px"}},null,8,w)]),(0,e._)("li",null,[(0,e._)("p",null,(0,d.zw)(l.skuName),1),g]),(0,e._)("li",null,[(0,e._)("h3",null,"￥"+(0,d.zw)(l.orderPrice)+".00",1)]),(0,e._)("li",null,"X"+(0,d.zw)(l.skuNum),1),D])))),128))]),(0,e._)("div",I,[k,(0,e.wy)((0,e._)("textarea",{placeholder:"建议留言前先与商家沟通确认",class:"remarks-cont","onUpdate:modelValue":s[0]||(s[0]=l=>r.data.msg=l)},null,512),[[n.nr,r.data.msg]])]),y,b]),(0,e._)("div",A,[(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("b",null,[(0,e._)("i",null,(0,d.zw)(r.orderInfo.totalNum),1),F]),(0,e._)("span",null,"¥"+(0,d.zw)(r.orderInfo.totalAmount)+".00",1)]),z,x])]),(0,e._)("div",N,[(0,e._)("div",C,[U,(0,e._)("span",null,"¥"+(0,d.zw)(r.orderInfo.totalAmount)+".00",1)]),(0,e._)("div",O,[E,(0,e._)("span",null,(0,d.zw)(r.userDefaultAddress.fullAddress),1),L,(0,e._)("span",null,(0,d.zw)(r.userDefaultAddress.consignee),1),(0,e._)("span",null,(0,d.zw)(r.userDefaultAddress.phoneNum),1)])]),(0,e._)("div",T,[(0,e._)("a",{class:"subBtn",onClick:s[1]||(s[1]=(...l)=>r.submitOrder&&r.submitOrder(...l))},"提交订单")])])}var K=a(4870),Y=a(65),j=a(678),q=a(7774),B={name:"Trade",setup(){const l=(0,Y.oR)(),s=(0,j.tv)(),a=(0,K.qj)({msg:"",orderId:""});(0,e.bv)((()=>{l.dispatch("getUserAddress"),l.dispatch("getOrderInfo")}));const d=(0,e.Fl)((()=>l.state.trade.orderInfo)),n=(0,e.Fl)((()=>l.state.trade.address)),r=(0,e.Fl)((()=>n.value.find((l=>"1"===l.isDefault))||{})),t=(l,s)=>{s.forEach((l=>l.isDefault="0")),l.isDefault="1"},i=async()=>{let{tradeNo:l,detailArrayList:e}=d.value,{consignee:n,phoneNum:t,fullAddress:i}=r.value,u={consignee:n,consigneeTel:t,deliveryAddress:i,paymentWay:"ONLINE",orderCommnet:a.msg,orderDetailList:e},c=await(0,q.ET)(l,u);200===c.code?(a.orderId=c.data,s.push(`/pay?orderId=${a.orderId}`)):alert(c.data)};return{data:a,changeDefault:t,submitOrder:i,addressInfo:(0,e.Fl)((()=>n.value)),userDefaultAddress:(0,e.Fl)((()=>r.value)),orderInfo:(0,e.Fl)((()=>d.value))}}},P=a(89);const R=(0,P.Z)(B,[["render",H],["__scopeId","data-v-38141782"]]);var V=R}}]);